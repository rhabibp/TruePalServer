<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Transaction - TruePal Inventory</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-boxes"></i> TruePal Inventory</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html#dashboard" class="nav-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="index.html#parts" class="nav-link"><i class="fas fa-cogs"></i> Parts</a></li>
                <li><a href="index.html#categories" class="nav-link"><i class="fas fa-tags"></i> Categories</a></li>
                <li><a href="index.html#transactions" class="nav-link active"><i class="fas fa-exchange-alt"></i> Transactions</a></li>
                <li><a href="index.html#invoices" class="nav-link"><i class="fas fa-file-invoice"></i> Invoices</a></li>
                <li><a href="index.html#low-stock" class="nav-link"><i class="fas fa-exclamation-triangle"></i> Low Stock</a></li>
                <li><a href="index.html#reports" class="nav-link"><i class="fas fa-chart-bar"></i> Reports</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <h1 id="page-title">New Transaction</h1>
                </div>
            </header>

            <section id="new-transaction-section" class="content-section active">
                <div class="form-container-split">
                    <div class="form-main-column">
                        <form id="transaction-form">
                            <div class="form-grid">
                                <!-- Part Selection -->
                                <div class="form-group full-width">
                                    <label>Parts *</label>
                                    <div class="multi-part-selection">
                                        <div class="searchable-select-container">
                                            <input type="text" id="transaction-part-search" placeholder="Search for parts to add..." class="search-input">
                                            <div id="search-loading-spinner" class="spinner" style="display: none;"></div>
                                            <div id="transaction-part-search-results" class="dropdown-menu"></div>
                                        </div>
                                        <div id="selected-parts-list" class="selected-parts-list">
                                            <!-- Selected parts will be dynamically added here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="form-sidebar-column">
                        <div class="transaction-summary-card">
                            <h3>Transaction Details</h3>
                            <form id="transaction-details-form">
                                <div class="form-group">
                                    <label for="transaction-type">Type *</label>
                                    <select id="transaction-type" required>
                                        <option value="OUT">Stock Out</option>
                                        <option value="IN">Stock In</option>
                                        <option value="ADJUSTMENT">Adjustment</option>
                                    </select>
                                </div>
                                <div class="form-group" id="recipient-form-group">
                                    <label for="transaction-recipient">Recipient Name</label>
                                    <input type="text" id="transaction-recipient">
                                </div>
                                <div class="form-group">
                                    <label for="transaction-reason">Reason</label>
                                    <input type="text" id="transaction-reason">
                                </div>
                                <div class="form-group">
                                    <label for="transaction-notes">Notes</label>
                                    <textarea id="transaction-notes" rows="3"></textarea>
                                </div>
                                <hr>
                                <h4>Payment</h4>
                                <div class="summary-row">
                                    <span>Total Amount:</span>
                                    <strong id="transaction-total-amount">$0.00</strong>
                                </div>
                                <div class="form-group">
                                    <label for="transaction-amount-paid">Amount Paid</label>
                                    <input type="number" id="transaction-amount-paid" step="0.01" value="0">
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="transaction-is-paid"> Fully Paid
                                    </label>
                                </div>
                                <div class="form-actions-sticky">
                                    <a href="index.html#transactions" class="btn btn-secondary">Cancel</a>
                                    <button type="submit" form="transaction-form" class="btn btn-primary">Save Transaction</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="toast-container"></div>
    <script type="module" src="js/new-transaction.js"></script>
</body>
</html>